---
weight: 22700
title: "Il2Cpp Modding"
description: "Differences in Il2Cpp and how to work around them"
icon: "psychology_alt"
date: "2025-06-28T01:51:07+02:00"
lastmod: "2025-06-28T01:51:07+02:00"
draft: false
toc: true
---

Il2Cpp and Mono modding share many similarities, but there are some differences that you should be aware of when modding main branch Schedule I.

Many examples (and possibly, a better explaination) can be found on the [Il2Cpp Differences MelonWiki page](https://melonwiki.xyz/#/modders/il2cppdifferences).


### Assemblies
In Mono, you can directly reference
```csharp
using FishNet;
using ScheduleOne.PlayerScripts;
```
This part isn't so different in Il2Cpp, but some assemblies (generated by Il2CppAssemblyGenerator) are prefixed with `Il2Cpp` in the name, so you need to reference them like this:
```csharp
using Il2CppFishNet;
using Il2CppScheduleOne.PlayerScripts;
```

### Types
Similarly, some methods might use `Il2Cpp` types instead of regular C# types. For example, `Il2CppSystem.Collections.Generic.List<T>` instead of `System.Collections.Generic.List<T>`. Main pain-point is that you can't use LINQ on `Il2Cpp` types directly, but that can be worked around by adding `._items`.
```csharp
Il2CppSystem.Collections.Generic.List<int> list;
list.FirstOrDefault(); // This won't work
list._items.FirstOrDefault(); // This will work
```

If you want to grab the IL2CPP type of a class, you can use `Il2CppType.Of<T>()` method. For example:
```csharp
using Il2CppInterop.Runtime;

Resources.FindObjectsOfTypeAll(Il2CppType.Of<Camera>());
```

#### Casting
You'll often need to cast types. While in Mono the compiler can infer the type, eg. when creating a callback action, in Il2Cpp you need to specify the type explicitly:
```csharp
addButton.onClick.AddListener((UnityAction)(() => {
    // Do something
}));
```
For types with no explicit cast, use `.Cast<T>()` or `.TryCast<T>()` method
```csharp
Type result = il2CppObj.Cast<Type>();
```

### Custom Components
If you want to create a custom component or inherit a Il2Cpp class, you need to use the `RegisterTypeInIl2Cpp` attribute. This is necessary for Il2Cpp to recognize your class and allow it to be used in the game.
```csharp
using Il2CppInterop.Runtime;
using Il2CppScheduleOne;

[RegisterTypeInIl2Cpp]
public class MyCommand : ConsoleCommand
{
    public MyCommand(IntPtr ptr) : base(ptr)
    {
    }

    // This constructor is required if we're instatiating from Mono side like
    // new MyCommand();
    // Not needed if not instantiating - don't use this constructor for MonoBehaviours
    public MyCommand() : base(ClassInjector.DerivedConstructorPointer<MyCommand>())
    {
        ClassInjector.DerivedConstructorBody(this);
    }

    // Other members required by ConsoleCommand, omitting for brevity
}
```
Alternatively, you can manually register the type using `ClassInjector.RegisterTypeInIl2Cpp<T>()` method.

### Coroutines
Use `MelonCoroutines`. Don't put `IEnumerator`s in types registered with `RegisterTypeInIl2Cpp`, as they will not work properly.
```csharp
using UnityEngine;
using MelonLoader;
public IEnumerator MyCoroutine()
{
    yield return new WaitForSeconds(1f);
    // Do something
}
MelonCoroutines.Start(MyCoroutine());
```
